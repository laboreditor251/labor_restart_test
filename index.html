<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="《重生之我还是打工人》是一款以劳动者处境为主题的互动叙事新闻。通过多分支选择，体验欠薪、社保、工伤、裁员与维权中的现实约束与后果。" />
    <meta name="keywords" content="互动叙事,劳动者,劳动权益,维权,欠薪,社保,工伤,裁员,新闻游戏,分支剧情" />
    <meta name="author" content="labor_restart" />
    <meta name="robots" content="index,follow,max-image-preview:large,max-snippet:-1,max-video-preview:-1" />
    <meta name="theme-color" content="#11141b" />
    <meta name="format-detection" content="telephone=no" />
    <link rel="canonical" href="/" />
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="重生之我还是打工人" />
    <meta property="og:locale" content="zh_CN" />
    <meta property="og:title" content="重生之我还是打工人（劳动处境模拟器）" />
    <meta property="og:description" content="以劳动者为题的互动叙事新闻，读者在多分支现场中做选择，体验现实约束、风险与后果。" />
    <meta property="og:image" content="/assets/images/index.jpg" />
    <meta property="og:image:alt" content="重生之我还是打工人 项目封面图" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="重生之我还是打工人（劳动处境模拟器）" />
    <meta name="twitter:description" content="以劳动者为题的互动叙事新闻，读者在多分支现场中做选择，体验现实约束、风险与后果。" />
    <meta name="twitter:image" content="/assets/images/index.jpg" />
    <title>重生之我还是打工人（劳动处境模拟器）</title>
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "重生之我还是打工人",
        "alternateName": "劳动处境模拟器",
        "url": "/",
        "inLanguage": "zh-CN",
        "description": "以劳动者处境为主题的互动叙事新闻模拟器，读者可在多分支路径中体验现实约束、风险与后果。",
        "image": "/assets/images/index.jpg"
      }
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500&family=Noto+Serif+SC:wght@400;600;700&display=swap" rel="stylesheet" />
    <script>
      window.tailwind = window.tailwind || {};
      window.tailwind.config = {
        theme: {
          extend: {
            colors: {
              paper: "#11141b",
              card: "#222833",
              card2: "#2b3442",
              ink: "#eef3fb",
              soft: "#c7d2e0",
              line: "rgba(199,210,224,0.28)",
              accent: "#6fd0bb",
              warn: "#ff6f7f"
            },
            fontFamily: {
              serifcn: ["Noto Serif SC", "Source Han Serif SC", "Songti SC", "serif"],
              sanscn: ["Noto Sans SC", "PingFang SC", "sans-serif"]
            },
            boxShadow: {
              paper: "0 8px 24px rgba(0,0,0,0.38)",
              photo: "0 10px 30px rgba(0,0,0,0.45), 0 0 0 1px rgba(232,237,242,0.14)"
            }
          }
        }
      };
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link rel="stylesheet" href="./assets/styles.css" />
  </head>
  <body class="paper-bg bg-paper text-ink font-serifcn">
    <main class="mx-auto w-full max-w-4xl px-4 py-8 md:px-6 md:py-10" x-data x-init="$store.game.loadStory()">
      <header class="mb-5 border-b border-line pb-3">
        <h1 class="text-[30px] leading-[1.24] font-semibold tracking-[0.01em] md:text-[52px]" x-text="$store.game.story?.title || 'YOUR_STORY_TITLE'"></h1>
        <p class="mt-3 text-[13px] leading-7 text-soft">
          免责声明：本作品为虚构的互动新闻式模拟体验，不对应任何真实人物或真实事件。
        </p>
      </header>

      <section
        class="mt-4 rounded-[2px_6px_3px_5px] border border-line bg-card p-3 shadow-paper md:p-4"
        x-show="$store.game.story?.trigger_warning && !$store.game.hasAcknowledgedWarning"
      >
        <img
          class="w-full max-h-[460px] rounded-[1px] border border-line object-cover shadow-photo"
          src="./assets/images/index.jpg"
          alt="项目首页主视觉"
        />
      </section>

      <section
        class="mt-4 rounded-[2px_6px_3px_5px] border border-line bg-card p-5 shadow-paper md:p-6"
        x-show="$store.game.story?.intro && (!$store.game.story?.trigger_warning || !$store.game.hasAcknowledgedWarning)"
      >
        <h2 class="mb-2 text-sm font-semibold tracking-[0.08em] text-soft">导语</h2>
        <div class="prose-custom" x-html="$store.game.renderMarkdown($store.game.story?.intro || '')"></div>
      </section>

      <section
        class="mt-4 rounded-[2px_6px_3px_5px] border border-line bg-card p-5 shadow-paper md:p-6"
        x-show="$store.game.story?.trigger_warning && !$store.game.hasAcknowledgedWarning && !$store.game.fatalError"
      >
        <h2 class="mb-2 text-sm font-semibold tracking-[0.08em] text-soft">Trigger Warning</h2>
        <div class="prose-custom" x-html="$store.game.renderMarkdown($store.game.story?.trigger_warning || '')"></div>
        <div class="mt-6 flex justify-center">
          <button
            class="start-cta inline-flex min-h-[66px] items-center justify-center rounded-[10px] border border-accent/70 bg-card2 px-12 py-4 font-sanscn text-xl font-semibold tracking-[0.03em] text-ink transition hover:border-accent hover:text-accent md:min-h-[74px] md:px-16 md:text-2xl"
            @click="$store.game.acknowledgeWarning()"
          >
            开始重生
          </button>
        </div>
      </section>

      <section
        class="scene-wrap mt-4 rounded-[2px_6px_3px_5px] border border-line bg-card p-5 shadow-paper md:p-6"
        x-show="!$store.game.fatalError && ($store.game.hasAcknowledgedWarning || !$store.game.story?.trigger_warning)"
      >
        <div class="mb-3 flex justify-end" x-show="$store.game.currentNodeId">
          <span class="inline-flex items-center rounded-[6px] border border-line bg-card2 px-3 py-1 font-sanscn text-xs tracking-[0.04em] text-soft md:text-sm">
            Node: <span class="ml-1 text-ink" x-text="$store.game.currentNodeId"></span>
          </span>
        </div>
        <div
          class="scene"
          :class="{
            'scene-out': $store.game.transitionPhase === 'out',
            'scene-in': $store.game.transitionPhase === 'in'
          }"
        >
          <i class="paper-sweep" aria-hidden="true" x-show="$store.game.transitionPhase === 'in'"></i>

          <template x-if="$store.game.currentNode">
            <article>
              <template x-if="$store.game.currentNode.image">
                <img
                  class="story-image mb-4 w-full max-h-[420px] rounded-[1px] border border-line object-cover shadow-photo"
                  :src="$store.game.currentNode.image"
                  alt="故事配图"
                />
              </template>

              <div class="prose-custom" x-html="$store.game.renderMarkdown($store.game.currentNode.text || '')"></div>

              <template x-if="$store.game.currentNode.ending">
                <div class="ending-card mt-4 rounded-[2px_4px_2px_4px] border border-line p-3" :class="$store.game.endingClass($store.game.currentNode.ending.type)">
                  <h2 class="text-2xl font-semibold md:text-3xl" x-text="$store.game.currentNode.ending.title || '结局'"></h2>
                  <p class="mt-2 text-lg leading-8 text-ink" x-html="$store.game.renderMarkdown($store.game.currentNode.ending.text || '')"></p>
                  <div class="mt-5 flex flex-wrap gap-3">
                    <button
                      class="inline-flex min-h-[52px] items-center rounded-[8px] border border-accent/70 bg-card2 px-6 py-3 font-sanscn text-base font-semibold text-ink transition hover:border-accent hover:text-accent disabled:cursor-not-allowed disabled:opacity-40 md:min-h-[58px] md:px-7 md:text-lg"
                      :disabled="$store.game.isTransitioning"
                      @click="$store.game.backToHome()"
                    >
                      重启人生
                    </button>
                  </div>
                </div>
              </template>

              <div class="choices-wrap mt-5">
                <template x-for="(choice, idx) in ($store.game.currentNode.choices || [])" :key="idx">
                  <button
                    class="choice-btn mt-3 w-full rounded-[2px_5px_2px_4px] border border-line bg-card2 px-5 py-4 text-left transition hover:border-accent/60 md:px-6 md:py-5"
                    :class="$store.game.choiceClass(choice)"
                    :disabled="!$store.game.isChoiceAvailable(choice) || $store.game.isTransitioning"
                    @click="$store.game.goTo(choice.to, choice)"
                  >
                    <div class="text-lg leading-8 md:text-xl" x-text="choice.label"></div>
                    <template x-if="!$store.game.isChoiceAvailable(choice)">
                      <div class="mt-2 text-sm leading-7 text-soft md:text-base" x-text="choice.note || '条件不足，暂时无法选择。'"></div>
                    </template>
                  </button>
                </template>
              </div>
            </article>
          </template>
        </div>
      </section>

      <section
        x-show="$store.game.fatalError"
        class="mt-4 rounded-[2px_6px_3px_5px] border border-warn/60 bg-[#25151a] p-5 shadow-paper md:p-6"
      >
        <h2 class="text-2xl font-semibold">故事加载失败</h2>
        <p class="mt-2 leading-7 text-[#ff9aa4]" x-text="$store.game.fatalError"></p>
      </section>

      <section
        class="mt-4 rounded-[2px_6px_3px_5px] border border-line bg-card p-5 shadow-paper"
        x-show="($store.game.hasAcknowledgedWarning || !$store.game.story?.trigger_warning) && !$store.game.currentNode?.ending"
      >
        <div class="flex flex-wrap gap-3">
          <button
            class="inline-flex min-h-[52px] items-center rounded-[8px] border border-line bg-card2 px-6 py-3 font-sanscn text-base font-semibold text-ink transition hover:border-accent/60 hover:text-accent disabled:cursor-not-allowed disabled:opacity-40 md:min-h-[58px] md:px-7 md:text-lg"
            :disabled="!$store.game.canUndo() || $store.game.isTransitioning || Boolean($store.game.currentNode?.ending)"
            @click="$store.game.undo()"
          >
            返回
          </button>
          <button
            class="inline-flex min-h-[52px] items-center rounded-[8px] border border-line bg-card2 px-6 py-3 font-sanscn text-base font-semibold text-ink transition hover:border-accent/60 hover:text-accent disabled:cursor-not-allowed disabled:opacity-40 md:min-h-[58px] md:px-7 md:text-lg"
            :disabled="$store.game.isTransitioning"
            @click="$store.game.backToHome()"
          >
            重启人生
          </button>
          <button
            class="inline-flex min-h-[52px] items-center rounded-[8px] border border-line bg-card2 px-6 py-3 font-sanscn text-base font-semibold text-ink transition hover:border-accent/60 hover:text-accent disabled:cursor-not-allowed disabled:opacity-40 md:min-h-[58px] md:px-7 md:text-lg"
            :disabled="$store.game.isTransitioning"
            @click="$store.game.toggleDebugPanel()"
          >
            Debug
          </button>
        </div>

        <div class="mt-4 flex flex-wrap items-center gap-3" x-show="$store.game.debugPanelOpen">
          <label class="font-sanscn text-sm text-soft md:text-base" for="debug-node-select">跳到支线：</label>
          <select
            id="debug-node-select"
            class="min-h-[44px] rounded-[8px] border border-line bg-card2 px-3 py-2 font-sanscn text-sm text-ink md:text-base"
            x-model="$store.game.debugNodeId"
            :disabled="$store.game.isTransitioning"
          >
            <template x-for="node in $store.game.getDebugNodes()" :key="node.id">
              <option :value="node.id" x-text="node.label"></option>
            </template>
          </select>
          <button
            class="inline-flex min-h-[44px] items-center rounded-[8px] border border-accent/70 bg-card2 px-4 py-2 font-sanscn text-sm font-semibold text-ink transition hover:border-accent hover:text-accent disabled:cursor-not-allowed disabled:opacity-40 md:text-base"
            :disabled="$store.game.isTransitioning"
            @click="$store.game.debugJump()"
          >
            直接进入
          </button>
        </div>
      </section>
    </main>

    <script src="./assets/app.js"></script>
  </body>
</html>
